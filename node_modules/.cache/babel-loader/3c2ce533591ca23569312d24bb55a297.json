{"ast":null,"code":"import _slicedToArray from \"/Users/christophecaillet/Dev_local/React/grandcompte/leospa-main/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/christophecaillet/Dev_local/React/grandcompte/leospa-main/src/Layouts/Pages/Prospect.js\";\nimport React, { useRef, useState, Fragment, useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport { getDatabase, ref, set, onValue } from \"firebase/database\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { auth, logInWithEmailAndPassword } from \"../../firebase\";\n\nfunction useQuery() {\n  const _useLocation = useLocation(),\n        search = _useLocation.search;\n\n  return React.useMemo(() => new URLSearchParams(search), [search]);\n}\n\nconst Prospect = props => {\n  const _useAuthState = useAuthState(auth),\n        _useAuthState2 = _slicedToArray(_useAuthState, 3),\n        user = _useAuthState2[0],\n        loading = _useAuthState2[1],\n        error = _useAuthState2[2];\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        code = _useState2[0],\n        setCode = _useState2[1];\n\n  const _useState3 = useState({\n    accountNumber: null,\n    reduction: null\n  }),\n        _useState4 = _slicedToArray(_useState3, 2),\n        propal = _useState4[0],\n        setPropal = _useState4[1];\n\n  const form = useRef();\n  let query = useQuery();\n  let location = useLocation();\n  useEffect(() => {\n    auth.onAuthStateChanged(function (user) {\n      const code = query.get(\"code\");\n      setCode(code); // si code\n\n      if (code) {\n        // recuperer detail\n        const detail = location.state.detail;\n        setPropal(detail);\n      } // sinon check en bd\n      else {\n          const db = getDatabase();\n          const prospectRef = ref(db, \"prospect/\" + \"fefereg\");\n          onValue(prospectRef, snapshot => {\n            const data = snapshot.val();\n            console.log(\"data\", data);\n\n            if (data) {\n              setPropal(data);\n            } else {\n              console.log(\"aucune offre\");\n            }\n          });\n        }\n    }); // sinon aucune proposition en cours\n  }, []);\n\n  const getPropal = () => {};\n\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(\"section\", {\n    className: \"procedures\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-lg-8 col-md-10 m-auto\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"sec-heading\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    className: \"sec-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, \"Confirmation de votre proposition\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, \"Suite \\xE0 votre entretien avec notre charg\\xE9 de client, vous avez b\\xE9n\\xE9fici\\xE9 de l'offre ci-dessous pour commencer notre partenariat.\")))))), React.createElement(\"section\", {\n    className: \"appointment\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"appointment-wrap\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(\"figure\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: require(\"../../assets/images/resto.jpg\"),\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"appointment-form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    ref: form,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-field half-width\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"select-field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \"NOMBRE DE COMPTES R\\xC9SERV\\xC9S : \", propal.accountNumber), React.createElement(\"div\", {\n    className: \"mt-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"VOUS AVEZ B\\xC9N\\xC9FICI\\xC9 D'UNE R\\xC9DUCTION DE \", propal.reduction, \"% SUR LE PRIX PUBLIC\"))), React.createElement(\"button\", {\n    className: \"btn btn-round\",\n    type: \"submit\",\n    className: \"btn btn-primary mt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"Accepter la proposition\"))))));\n};\n\nexport default Prospect;","map":{"version":3,"sources":["/Users/christophecaillet/Dev_local/React/grandcompte/leospa-main/src/Layouts/Pages/Prospect.js"],"names":["React","useRef","useState","Fragment","useEffect","useLocation","getDatabase","ref","set","onValue","useAuthState","auth","logInWithEmailAndPassword","useQuery","search","useMemo","URLSearchParams","Prospect","props","user","loading","error","code","setCode","accountNumber","reduction","propal","setPropal","form","query","location","onAuthStateChanged","get","detail","state","db","prospectRef","snapshot","data","val","console","log","getPropal","require"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,QAAxB,EAAkCC,QAAlC,EAA4CC,SAA5C,QAA6D,OAA7D;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,WAAT,EAAsBC,GAAtB,EAA2BC,GAA3B,EAAgCC,OAAhC,QAA+C,mBAA/C;AACA,SAASC,YAAT,QAA6B,2BAA7B;AACA,SAASC,IAAT,EAAeC,yBAAf,QAAgD,gBAAhD;;AAEA,SAASC,QAAT,GAAoB;AAAA,uBACCR,WAAW,EADZ;AAAA,QACVS,MADU,gBACVA,MADU;;AAGlB,SAAOd,KAAK,CAACe,OAAN,CAAc,MAAM,IAAIC,eAAJ,CAAoBF,MAApB,CAApB,EAAiD,CAACA,MAAD,CAAjD,CAAP;AACD;;AAED,MAAMG,QAAQ,GAAIC,KAAD,IAAW;AAAA,wBACKR,YAAY,CAACC,IAAD,CADjB;AAAA;AAAA,QACnBQ,IADmB;AAAA,QACbC,OADa;AAAA,QACJC,KADI;;AAAA,oBAEFnB,QAAQ,CAAC,KAAD,CAFN;AAAA;AAAA,QAEnBoB,IAFmB;AAAA,QAEbC,OAFa;;AAAA,qBAGErB,QAAQ,CAAC;AACnCsB,IAAAA,aAAa,EAAE,IADoB;AAEnCC,IAAAA,SAAS,EAAE;AAFwB,GAAD,CAHV;AAAA;AAAA,QAGnBC,MAHmB;AAAA,QAGXC,SAHW;;AAO1B,QAAMC,IAAI,GAAG3B,MAAM,EAAnB;AACA,MAAI4B,KAAK,GAAGhB,QAAQ,EAApB;AACA,MAAIiB,QAAQ,GAAGzB,WAAW,EAA1B;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACdO,IAAAA,IAAI,CAACoB,kBAAL,CAAwB,UAAUZ,IAAV,EAAgB;AACtC,YAAMG,IAAI,GAAGO,KAAK,CAACG,GAAN,CAAU,MAAV,CAAb;AACAT,MAAAA,OAAO,CAACD,IAAD,CAAP,CAFsC,CAGtC;;AACA,UAAIA,IAAJ,EAAU;AACR;AACA,cAAMW,MAAM,GAAGH,QAAQ,CAACI,KAAT,CAAeD,MAA9B;AACAN,QAAAA,SAAS,CAACM,MAAD,CAAT;AACD,OAJD,CAKA;AALA,WAMK;AACH,gBAAME,EAAE,GAAG7B,WAAW,EAAtB;AACA,gBAAM8B,WAAW,GAAG7B,GAAG,CAAC4B,EAAD,EAAK,cAAc,SAAnB,CAAvB;AACA1B,UAAAA,OAAO,CAAC2B,WAAD,EAAeC,QAAD,IAAc;AACjC,kBAAMC,IAAI,GAAGD,QAAQ,CAACE,GAAT,EAAb;AACAC,YAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBH,IAApB;;AACA,gBAAIA,IAAJ,EAAU;AACRX,cAAAA,SAAS,CAACW,IAAD,CAAT;AACD,aAFD,MAEO;AACLE,cAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACD;AACF,WARM,CAAP;AASD;AACF,KAvBD,EADc,CAyBd;AACD,GA1BQ,EA0BN,EA1BM,CAAT;;AA2BA,QAAMC,SAAS,GAAG,MAAM,CAAE,CAA1B;;AACA,SACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAS,IAAA,SAAS,EAAC,YAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAI,IAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uJAFF,CADF,CADF,CADF,CADF,CADF,EAiBE;AAAS,IAAA,SAAS,EAAC,aAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,GAAG,EAAEC,OAAO,CAAC,+BAAD,CAAjB;AAAoD,IAAA,GAAG,EAAC,EAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAIE;AAAK,IAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAM,IAAA,GAAG,EAAEf,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CAAmCF,MAAM,CAACF,aAA1C,CADF,EAEE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4DAC0CE,MAAM,CAACD,SADjD,yBAFF,CADF,CADF,EAUE;AACE,IAAA,SAAS,EAAC,eADZ;AAEE,IAAA,IAAI,EAAC,QAFP;AAGE,IAAA,SAAS,EAAC,sBAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAVF,CADF,CAJF,CADF,CAjBF,CADF;AA+CD,CAtFD;;AAwFA,eAAeR,QAAf","sourcesContent":["import React, { useRef, useState, Fragment, useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport { getDatabase, ref, set, onValue } from \"firebase/database\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { auth, logInWithEmailAndPassword } from \"../../firebase\";\n\nfunction useQuery() {\n  const { search } = useLocation();\n\n  return React.useMemo(() => new URLSearchParams(search), [search]);\n}\n\nconst Prospect = (props) => {\n  const [user, loading, error] = useAuthState(auth);\n  const [code, setCode] = useState(false);\n  const [propal, setPropal] = useState({\n    accountNumber: null,\n    reduction: null,\n  });\n  const form = useRef();\n  let query = useQuery();\n  let location = useLocation();\n\n  useEffect(() => {\n    auth.onAuthStateChanged(function (user) {\n      const code = query.get(\"code\");\n      setCode(code);\n      // si code\n      if (code) {\n        // recuperer detail\n        const detail = location.state.detail;\n        setPropal(detail);\n      }\n      // sinon check en bd\n      else {\n        const db = getDatabase();\n        const prospectRef = ref(db, \"prospect/\" + \"fefereg\");\n        onValue(prospectRef, (snapshot) => {\n          const data = snapshot.val();\n          console.log(\"data\", data);\n          if (data) {\n            setPropal(data);\n          } else {\n            console.log(\"aucune offre\");\n          }\n        });\n      }\n    });\n    // sinon aucune proposition en cours\n  }, []);\n  const getPropal = () => {};\n  return (\n    <Fragment>\n      <section className=\"procedures\">\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-lg-8 col-md-10 m-auto\">\n              <div className=\"sec-heading\">\n                <h3 className=\"sec-title\">Confirmation de votre proposition</h3>\n                <p>\n                  Suite à votre entretien avec notre chargé de client, vous avez\n                  bénéficié de l'offre ci-dessous pour commencer notre\n                  partenariat.\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n      <section className=\"appointment\">\n        <div className=\"appointment-wrap\">\n          <figure>\n            <img src={require(\"../../assets/images/resto.jpg\")} alt=\"\" />\n          </figure>\n          <div className=\"appointment-form\">\n            <form ref={form}>\n              <div className=\"form-field half-width\">\n                <div className=\"select-field\">\n                  <div>NOMBRE DE COMPTES RÉSERVÉS : {propal.accountNumber}</div>\n                  <div className=\"mt-2\">\n                    VOUS AVEZ BÉNÉFICIÉ D'UNE RÉDUCTION DE {propal.reduction}%\n                    SUR LE PRIX PUBLIC\n                  </div>\n                </div>\n              </div>\n              <button\n                className=\"btn btn-round\"\n                type=\"submit\"\n                className=\"btn btn-primary mt-3\"\n              >\n                Accepter la proposition\n              </button>\n            </form>\n          </div>\n        </div>\n      </section>\n    </Fragment>\n  );\n};\n\nexport default Prospect;\n"]},"metadata":{},"sourceType":"module"}