{"ast":null,"code":"var _jsxFileName = \"/Users/christophecaillet/Dev_local/React/grandcompte/leospa-main/src/Components/Navbar.js\";\nimport React, { Component } from \"react\";\nimport { NavLink, withRouter, useHistory } from \"react-router-dom\";\nimport { auth, logInWithEmailAndPassword } from \"../firebase\";\nimport { getDatabase, ref, onValue, child, get } from \"firebase/database\";\n\nclass Navbar extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      menuOpen: false,\n      admin: true\n    };\n\n    this.menuToggleHandler = () => {\n      this.setState(prevState => {\n        return {\n          menuOpen: !prevState.menuOpen\n        };\n      });\n    };\n\n    this.clearStateHandler = () => {\n      if (this.state.menuOpen) {\n        this.setState({\n          menuOpen: false\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    auth.onAuthStateChanged(user => {\n      if (!user) {\n        return;\n      }\n\n      const uid = user.uid;\n      const db = getDatabase();\n      const dbRef = ref(getDatabase());\n      get(child(dbRef, \"users/\".concat(uid))).then(snapshot => {\n        if (snapshot.exists()) {\n          const data = snapshot.val();\n\n          if (data && data.type && (data.type == \"admin\" || data.type == \"commercial\")) {\n            this.setState({\n              admin: true\n            });\n          } else {\n            this.setState({\n              admin: false\n            });\n          }\n        } else {\n          console.log(\"No data available\");\n        }\n      });\n    });\n  } // isHome =\n  // absHeader = ( this.props.location.pathname === \"/\") ? ' abs-header' : '';\n  // right = ( this.props.location.pathname === '/') ? '' : ' text-right';\n\n\n  render() {\n    let absHeader = this.props.location.pathname === \"/\" ? \" abs-header\" : \"\";\n    let right = this.props.location.pathname === \"/\" ? \"\" : \" text-right\";\n    return (// Header start\n      React.createElement(\"header\", {\n        className: \"header\" + absHeader,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row align-items-end\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        to: this.state.admin ? \"/\" : \"/gestion\",\n        className: \"logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: require(\"../assets/images/logo.png\"),\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"col-md-9\" + right,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"nav\", {\n        className: \"primary-menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"mobile-menu\",\n        onClick: this.menuToggleHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"ti-menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      })), !this.state.admin && React.createElement(\"ul\", {\n        className: this.state.menuOpen ? \"active\" : \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        activeStyle: {\n          color: \"#263a41\"\n        },\n        to: \"/gestion\",\n        onClick: this.clearStateHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"MES COMPTES UNEXTRA\")), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        to: \"/prospect\",\n        onClick: this.clearStateHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"proposition en cours\")), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        to: \"/achat\",\n        onClick: this.clearStateHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"ACHAT DE COMPTES\")))))))) // Header start\n\n    );\n  }\n\n}\n\nexport default withRouter(Navbar);","map":{"version":3,"sources":["/Users/christophecaillet/Dev_local/React/grandcompte/leospa-main/src/Components/Navbar.js"],"names":["React","Component","NavLink","withRouter","useHistory","auth","logInWithEmailAndPassword","getDatabase","ref","onValue","child","get","Navbar","state","menuOpen","admin","menuToggleHandler","setState","prevState","clearStateHandler","componentDidMount","onAuthStateChanged","user","uid","db","dbRef","then","snapshot","exists","data","val","type","console","log","render","absHeader","props","location","pathname","right","require","color"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { NavLink, withRouter, useHistory } from \"react-router-dom\";\r\nimport { auth, logInWithEmailAndPassword } from \"../firebase\";\r\nimport { getDatabase, ref, onValue, child, get } from \"firebase/database\";\r\n\r\nclass Navbar extends Component {\r\n  state = {\r\n    menuOpen: false,\r\n    admin: true,\r\n  };\r\n\r\n  componentDidMount() {\r\n    auth.onAuthStateChanged((user) => {\r\n      if (!user) {\r\n        return;\r\n      }\r\n\r\n      const uid = user.uid;\r\n      const db = getDatabase();\r\n      const dbRef = ref(getDatabase());\r\n      get(child(dbRef, `users/${uid}`)).then((snapshot) => {\r\n        if (snapshot.exists()) {\r\n          const data = snapshot.val();\r\n          if (\r\n            data &&\r\n            data.type &&\r\n            (data.type == \"admin\" || data.type == \"commercial\")\r\n          ) {\r\n            this.setState({ admin: true });\r\n          } else {\r\n            this.setState({ admin: false });\r\n          }\r\n        } else {\r\n          console.log(\"No data available\");\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  // isHome =\r\n  // absHeader = ( this.props.location.pathname === \"/\") ? ' abs-header' : '';\r\n  // right = ( this.props.location.pathname === '/') ? '' : ' text-right';\r\n\r\n  menuToggleHandler = () => {\r\n    this.setState((prevState) => {\r\n      return { menuOpen: !prevState.menuOpen };\r\n    });\r\n  };\r\n\r\n  // componentWillUnmount() {\r\n  //     this.clearStateHandler()\r\n  // }\r\n\r\n  clearStateHandler = () => {\r\n    if (this.state.menuOpen) {\r\n      this.setState({\r\n        menuOpen: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let absHeader = this.props.location.pathname === \"/\" ? \" abs-header\" : \"\";\r\n    let right = this.props.location.pathname === \"/\" ? \"\" : \" text-right\";\r\n\r\n    return (\r\n      // Header start\r\n      <header className={\"header\" + absHeader}>\r\n        <div className=\"container\">\r\n          <div className=\"row align-items-end\">\r\n            <div className=\"col-md-3\">\r\n              <NavLink\r\n                to={this.state.admin ? \"/\" : \"/gestion\"}\r\n                className=\"logo\"\r\n              >\r\n                <img src={require(\"../assets/images/logo.png\")} alt=\"\" />\r\n              </NavLink>\r\n            </div>\r\n            <div className={\"col-md-9\" + right}>\r\n              <nav className=\"primary-menu\">\r\n                <button\r\n                  className=\"mobile-menu\"\r\n                  onClick={this.menuToggleHandler}\r\n                >\r\n                  <i className=\"ti-menu\"></i>\r\n                </button>\r\n                {!this.state.admin && (\r\n                  <ul className={this.state.menuOpen ? \"active\" : \"\"}>\r\n                    {/*<li>\r\n                    <NavLink to=\"/\" onClick={this.clearStateHandler}>\r\n                      ACCUEIL\r\n                    </NavLink>\r\n                 </li>*/}\r\n                    <li>\r\n                      <NavLink\r\n                        activeStyle={{ color: \"#263a41\" }}\r\n                        to=\"/gestion\"\r\n                        onClick={this.clearStateHandler}\r\n                      >\r\n                        MES COMPTES UNEXTRA\r\n                      </NavLink>\r\n                    </li>\r\n                    <li>\r\n                      <NavLink to=\"/prospect\" onClick={this.clearStateHandler}>\r\n                        proposition en cours\r\n                      </NavLink>\r\n                    </li>\r\n                    <li>\r\n                      <NavLink to=\"/achat\" onClick={this.clearStateHandler}>\r\n                        ACHAT DE COMPTES\r\n                      </NavLink>\r\n                    </li>\r\n                  </ul>\r\n                )}\r\n              </nav>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n      // Header start\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Navbar);\r\n"]},"metadata":{},"sourceType":"module"}