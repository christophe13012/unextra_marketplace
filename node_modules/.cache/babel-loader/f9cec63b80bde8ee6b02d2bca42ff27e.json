{"ast":null,"code":"import _slicedToArray from \"/Users/christophecaillet/Dev_local/React/grandcompte/leospa-main/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/christophecaillet/Dev_local/React/grandcompte/leospa-main/src/Layouts/Pages/MarketPlace.js\";\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport Procedure from \"../../Sections/Procedure\";\nimport Appointment from \"../../Sections/Appointment\";\nimport { getDatabase, ref, onValue } from \"firebase/database\";\nimport { getAuth } from \"firebase/auth\";\nimport { useHistory } from \"react-router-dom\";\n\nconst MarketPlace = props => {\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        user = _useState2[0],\n        setuser = _useState2[1];\n\n  const history = useHistory();\n  useEffect(() => {\n    auth.onAuthStateChanged(function (user) {\n      if (user) {\n        // User is signed in.\n        console.log(\"test 1\", user);\n        setEmail(user.email);\n      } else {\n        // No user is signed in.\n        setEmail(null);\n      }\n    });\n    const auth = getAuth();\n    const user = auth.currentUser;\n\n    if (user !== null) {\n      const uid = user.uid;\n      const db = getDatabase();\n      const usersRef = ref(db, \"users/\" + uid);\n      onValue(usersRef, snapshot => {\n        const data = snapshot.val();\n        console.log(\"data\", data);\n\n        if (data && data.type && (data.type == \"admin\" || data.type == \"commercial\")) {\n          console.log(\"admin\");\n        } else {\n          history.push(\"/\");\n        }\n      });\n    } else {\n      history.push(\"/\");\n    }\n  }, []);\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(Procedure, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }), React.createElement(Appointment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }));\n};\n\nexport default MarketPlace;","map":{"version":3,"sources":["/Users/christophecaillet/Dev_local/React/grandcompte/leospa-main/src/Layouts/Pages/MarketPlace.js"],"names":["React","Fragment","useEffect","useState","Procedure","Appointment","getDatabase","ref","onValue","getAuth","useHistory","MarketPlace","props","user","setuser","history","auth","onAuthStateChanged","console","log","setEmail","email","currentUser","uid","db","usersRef","snapshot","data","val","type","push"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,QAArC,QAAqD,OAArD;AACA,OAAOC,SAAP,MAAsB,0BAAtB;AACA,OAAOC,WAAP,MAAwB,4BAAxB;AACA,SAASC,WAAT,EAAsBC,GAAtB,EAA2BC,OAA3B,QAA0C,mBAA1C;AACA,SAASC,OAAT,QAAwB,eAAxB;AACA,SAASC,UAAT,QAA2B,kBAA3B;;AAEA,MAAMC,WAAW,GAAIC,KAAD,IAAW;AAAA,oBACLT,QAAQ,CAAC,IAAD,CADH;AAAA;AAAA,QACtBU,IADsB;AAAA,QAChBC,OADgB;;AAE7B,QAAMC,OAAO,GAAGL,UAAU,EAA1B;AAEAR,EAAAA,SAAS,CAAC,MAAM;AACdc,IAAAA,IAAI,CAACC,kBAAL,CAAwB,UAAUJ,IAAV,EAAgB;AACtC,UAAIA,IAAJ,EAAU;AACR;AACAK,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBN,IAAtB;AACAO,QAAAA,QAAQ,CAACP,IAAI,CAACQ,KAAN,CAAR;AACD,OAJD,MAIO;AACL;AACAD,QAAAA,QAAQ,CAAC,IAAD,CAAR;AACD;AACF,KATD;AAUA,UAAMJ,IAAI,GAAGP,OAAO,EAApB;AACA,UAAMI,IAAI,GAAGG,IAAI,CAACM,WAAlB;;AACA,QAAIT,IAAI,KAAK,IAAb,EAAmB;AACjB,YAAMU,GAAG,GAAGV,IAAI,CAACU,GAAjB;AACA,YAAMC,EAAE,GAAGlB,WAAW,EAAtB;AACA,YAAMmB,QAAQ,GAAGlB,GAAG,CAACiB,EAAD,EAAK,WAAWD,GAAhB,CAApB;AACAf,MAAAA,OAAO,CAACiB,QAAD,EAAYC,QAAD,IAAc;AAC9B,cAAMC,IAAI,GAAGD,QAAQ,CAACE,GAAT,EAAb;AACAV,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBQ,IAApB;;AACA,YACEA,IAAI,IACJA,IAAI,CAACE,IADL,KAECF,IAAI,CAACE,IAAL,IAAa,OAAb,IAAwBF,IAAI,CAACE,IAAL,IAAa,YAFtC,CADF,EAIE;AACAX,UAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACD,SAND,MAMO;AACLJ,UAAAA,OAAO,CAACe,IAAR,CAAa,GAAb;AACD;AACF,OAZM,CAAP;AAaD,KAjBD,MAiBO;AACLf,MAAAA,OAAO,CAACe,IAAR,CAAa,GAAb;AACD;AACF,GAjCQ,EAiCN,EAjCM,CAAT;AAkCA,SACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF;AAMD,CA5CD;;AA8CA,eAAenB,WAAf","sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\nimport Procedure from \"../../Sections/Procedure\";\nimport Appointment from \"../../Sections/Appointment\";\nimport { getDatabase, ref, onValue } from \"firebase/database\";\nimport { getAuth } from \"firebase/auth\";\nimport { useHistory } from \"react-router-dom\";\n\nconst MarketPlace = (props) => {\n  const [user, setuser] = useState(null);\n  const history = useHistory();\n\n  useEffect(() => {\n    auth.onAuthStateChanged(function (user) {\n      if (user) {\n        // User is signed in.\n        console.log(\"test 1\", user);\n        setEmail(user.email);\n      } else {\n        // No user is signed in.\n        setEmail(null);\n      }\n    });\n    const auth = getAuth();\n    const user = auth.currentUser;\n    if (user !== null) {\n      const uid = user.uid;\n      const db = getDatabase();\n      const usersRef = ref(db, \"users/\" + uid);\n      onValue(usersRef, (snapshot) => {\n        const data = snapshot.val();\n        console.log(\"data\", data);\n        if (\n          data &&\n          data.type &&\n          (data.type == \"admin\" || data.type == \"commercial\")\n        ) {\n          console.log(\"admin\");\n        } else {\n          history.push(\"/\");\n        }\n      });\n    } else {\n      history.push(\"/\");\n    }\n  }, []);\n  return (\n    <Fragment>\n      <Procedure />\n      <Appointment />\n    </Fragment>\n  );\n};\n\nexport default MarketPlace;\n"]},"metadata":{},"sourceType":"module"}