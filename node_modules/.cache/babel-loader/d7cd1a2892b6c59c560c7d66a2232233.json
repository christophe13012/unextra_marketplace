{"ast":null,"code":"import _slicedToArray from \"/Users/christophecaillet/Dev_local/React/grandcompte/leospa-main/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/christophecaillet/Dev_local/React/grandcompte/leospa-main/src/Layouts/Pages/Prospect.js\";\nimport React, { useRef, useState, Fragment, useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport { getDatabase, ref, set, onValue } from \"firebase/database\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { auth, logInWithEmailAndPassword } from \"../../firebase\";\n\nfunction useQuery() {\n  const _useLocation = useLocation(),\n        search = _useLocation.search;\n\n  return React.useMemo(() => new URLSearchParams(search), [search]);\n}\n\nconst Prospect = props => {\n  const _useAuthState = useAuthState(auth),\n        _useAuthState2 = _slicedToArray(_useAuthState, 3),\n        user = _useAuthState2[0],\n        loading = _useAuthState2[1],\n        error = _useAuthState2[2];\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        code = _useState2[0],\n        setCode = _useState2[1];\n\n  const _useState3 = useState(true),\n        _useState4 = _slicedToArray(_useState3, 2),\n        proposition = _useState4[0],\n        setProposition = _useState4[1];\n\n  const _useState5 = useState({\n    accountNumber: null,\n    reduction: null\n  }),\n        _useState6 = _slicedToArray(_useState5, 2),\n        propal = _useState6[0],\n        setPropal = _useState6[1];\n\n  const form = useRef();\n  let query = useQuery();\n  let location = useLocation();\n  useEffect(() => {\n    auth.onAuthStateChanged(function (user) {\n      const code = query.get(\"code\");\n      setCode(code); // si code\n\n      if (code) {\n        // recuperer detail\n        const detail = location.state.detail;\n        setPropal(detail);\n      } // sinon check en bd\n      else {\n          const db = getDatabase();\n          const prospectRef = ref(db, \"prospect/\" + user.uid);\n          onValue(prospectRef, snapshot => {\n            const data = snapshot.val();\n\n            if (data) {\n              setPropal(data);\n            } else {\n              // sinon aucune proposition en cours\n              console.log(\"aucune offre\");\n              setProposition(false);\n            }\n          });\n        }\n    });\n  }, []);\n\n  const accept = e => {\n    e.preventDefault();\n    console.log(\"accepted\");\n  };\n\n  if (!proposition) {\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(\"section\", {\n      className: \"procedures\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-8 col-md-10 m-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"sec-heading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"sec-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, \"Aucune proposition en cours\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \"Vous n'avez aucune proposition en cours de n\\xE9gociation, merci de contacter nos services au ... pour connaitre le d\\xE9tail de nos offres ou directement sur ce site dans la section ACHAT DE COMPTES\")))))));\n  }\n\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"section\", {\n    className: \"procedures\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-lg-8 col-md-10 m-auto\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"sec-heading\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    className: \"sec-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"Confirmation de votre proposition\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, \"Suite \\xE0 votre entretien avec notre charg\\xE9 de client, vous avez b\\xE9n\\xE9fici\\xE9 de l'offre ci-dessous pour commencer notre partenariat.\")))))), React.createElement(\"section\", {\n    className: \"appointment\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"appointment-wrap\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(\"figure\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: require(\"../../assets/images/resto.jpg\"),\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"appointment-form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: accept,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-field half-width\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"select-field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, \"NOMBRE DE COMPTES R\\xC9SERV\\xC9S : \", propal.accountNumber), React.createElement(\"div\", {\n    className: \"mt-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, \"VOUS AVEZ B\\xC9N\\xC9FICI\\xC9 D'UNE R\\xC9DUCTION DE \", propal.reduction, \"% SUR LE PRIX PUBLIC\"))), React.createElement(\"button\", {\n    onClick: accept,\n    className: \"btn btn-round\",\n    type: \"submit\",\n    className: \"btn btn-primary mt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, \"Accepter la proposition\"))))));\n};\n\nexport default Prospect;","map":{"version":3,"sources":["/Users/christophecaillet/Dev_local/React/grandcompte/leospa-main/src/Layouts/Pages/Prospect.js"],"names":["React","useRef","useState","Fragment","useEffect","useLocation","getDatabase","ref","set","onValue","useAuthState","auth","logInWithEmailAndPassword","useQuery","search","useMemo","URLSearchParams","Prospect","props","user","loading","error","code","setCode","proposition","setProposition","accountNumber","reduction","propal","setPropal","form","query","location","onAuthStateChanged","get","detail","state","db","prospectRef","uid","snapshot","data","val","console","log","accept","e","preventDefault","require"],"mappings":"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","sourcesContent":["import React, { useRef, useState, Fragment, useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport { getDatabase, ref, set, onValue } from \"firebase/database\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { auth, logInWithEmailAndPassword } from \"../../firebase\";\n\nfunction useQuery() {\n  const { search } = useLocation();\n\n  return React.useMemo(() => new URLSearchParams(search), [search]);\n}\n\nconst Prospect = (props) => {\n  const [user, loading, error] = useAuthState(auth);\n  const [code, setCode] = useState(false);\n  const [proposition, setProposition] = useState(true);\n  const [propal, setPropal] = useState({\n    accountNumber: null,\n    reduction: null,\n  });\n  const form = useRef();\n  let query = useQuery();\n  let location = useLocation();\n\n  useEffect(() => {\n    auth.onAuthStateChanged(function (user) {\n      const code = query.get(\"code\");\n      setCode(code);\n      // si code\n      if (code) {\n        // recuperer detail\n        const detail = location.state.detail;\n        setPropal(detail);\n      }\n      // sinon check en bd\n      else {\n        const db = getDatabase();\n        const prospectRef = ref(db, \"prospect/\" + user.uid);\n        onValue(prospectRef, (snapshot) => {\n          const data = snapshot.val();\n          if (data) {\n            setPropal(data);\n          } else {\n            // sinon aucune proposition en cours\n            console.log(\"aucune offre\");\n            setProposition(false);\n          }\n        });\n      }\n    });\n  }, []);\n  const accept = (e) => {\n    e.preventDefault();\n    console.log(\"accepted\");\n  };\n  if (!proposition) {\n    return (\n      <Fragment>\n        <section className=\"procedures\">\n          <div className=\"container\">\n            <div className=\"row\">\n              <div className=\"col-lg-8 col-md-10 m-auto\">\n                <div className=\"sec-heading\">\n                  <h3 className=\"sec-title\">Aucune proposition en cours</h3>\n                  <p>\n                    Vous n'avez aucune proposition en cours de négociation,\n                    merci de contacter nos services au ... pour connaitre le\n                    détail de nos offres ou directement sur ce site dans la\n                    section ACHAT DE COMPTES\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n      </Fragment>\n    );\n  }\n  return (\n    <Fragment>\n      <section className=\"procedures\">\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-lg-8 col-md-10 m-auto\">\n              <div className=\"sec-heading\">\n                <h3 className=\"sec-title\">Confirmation de votre proposition</h3>\n                <p>\n                  Suite à votre entretien avec notre chargé de client, vous avez\n                  bénéficié de l'offre ci-dessous pour commencer notre\n                  partenariat.\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n      <section className=\"appointment\">\n        <div className=\"appointment-wrap\">\n          <figure>\n            <img src={require(\"../../assets/images/resto.jpg\")} alt=\"\" />\n          </figure>\n          <div className=\"appointment-form\">\n            <form onSubmit={accept}>\n              <div className=\"form-field half-width\">\n                <div className=\"select-field\">\n                  <div>NOMBRE DE COMPTES RÉSERVÉS : {propal.accountNumber}</div>\n                  <div className=\"mt-2\">\n                    VOUS AVEZ BÉNÉFICIÉ D'UNE RÉDUCTION DE {propal.reduction}%\n                    SUR LE PRIX PUBLIC\n                  </div>\n                </div>\n              </div>\n              <button\n                onClick={accept}\n                className=\"btn btn-round\"\n                type=\"submit\"\n                className=\"btn btn-primary mt-3\"\n              >\n                Accepter la proposition\n              </button>\n            </form>\n          </div>\n        </div>\n      </section>\n    </Fragment>\n  );\n};\n\nexport default Prospect;\n"]},"metadata":{},"sourceType":"module"}