{"ast":null,"code":"var _jsxFileName = \"/Users/christophecaillet/Dev_local/React/grandcompte/leospa-main/src/Layouts/Pages/Gestion.js\";\nimport React, { useRef, useState, Fragment, useEffect } from \"react\";\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport { getDatabase, ref, set, onValue } from \"firebase/database\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { auth, logInWithEmailAndPassword } from \"../../firebase\";\n\nconst Gestion = props => {\n  useEffect(() => {\n    auth.onAuthStateChanged(function (user) {\n      setUserLogged(user);\n      const code = query.get(\"code\");\n      setCode(code); // si code\n\n      if (code) {\n        // recuperer detail\n        const detail = location.state.detail;\n        setPropal(detail);\n      } // sinon check en bd\n      else {\n          const prospectRef = ref(db, \"prospect/\" + user.uid);\n          onValue(prospectRef, snapshot => {\n            const data = snapshot.val();\n\n            if (data && !data.payed) {\n              setPropal(data);\n            } else {\n              // Aucune proposition en cours ou elle est payée\n              console.log(\"aucune offre\");\n              setProposition(false);\n            }\n          });\n        }\n    });\n  }, []);\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, \"gestion\");\n};\n\nexport default Gestion;","map":{"version":3,"sources":["/Users/christophecaillet/Dev_local/React/grandcompte/leospa-main/src/Layouts/Pages/Gestion.js"],"names":["React","useRef","useState","Fragment","useEffect","useLocation","useHistory","getDatabase","ref","set","onValue","useAuthState","auth","logInWithEmailAndPassword","Gestion","props","onAuthStateChanged","user","setUserLogged","code","query","get","setCode","detail","location","state","setPropal","prospectRef","db","uid","snapshot","data","val","payed","console","log","setProposition"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,QAAxB,EAAkCC,QAAlC,EAA4CC,SAA5C,QAA6D,OAA7D;AACA,SAASC,WAAT,EAAsBC,UAAtB,QAAwC,kBAAxC;AACA,SAASC,WAAT,EAAsBC,GAAtB,EAA2BC,GAA3B,EAAgCC,OAAhC,QAA+C,mBAA/C;AACA,SAASC,YAAT,QAA6B,2BAA7B;AACA,SAASC,IAAT,EAAeC,yBAAf,QAAgD,gBAAhD;;AAEA,MAAMC,OAAO,GAAIC,KAAD,IAAW;AACzBX,EAAAA,SAAS,CAAC,MAAM;AACdQ,IAAAA,IAAI,CAACI,kBAAL,CAAwB,UAAUC,IAAV,EAAgB;AACtCC,MAAAA,aAAa,CAACD,IAAD,CAAb;AACA,YAAME,IAAI,GAAGC,KAAK,CAACC,GAAN,CAAU,MAAV,CAAb;AACAC,MAAAA,OAAO,CAACH,IAAD,CAAP,CAHsC,CAItC;;AACA,UAAIA,IAAJ,EAAU;AACR;AACA,cAAMI,MAAM,GAAGC,QAAQ,CAACC,KAAT,CAAeF,MAA9B;AACAG,QAAAA,SAAS,CAACH,MAAD,CAAT;AACD,OAJD,CAKA;AALA,WAMK;AACH,gBAAMI,WAAW,GAAGnB,GAAG,CAACoB,EAAD,EAAK,cAAcX,IAAI,CAACY,GAAxB,CAAvB;AACAnB,UAAAA,OAAO,CAACiB,WAAD,EAAeG,QAAD,IAAc;AACjC,kBAAMC,IAAI,GAAGD,QAAQ,CAACE,GAAT,EAAb;;AACA,gBAAID,IAAI,IAAI,CAACA,IAAI,CAACE,KAAlB,EAAyB;AACvBP,cAAAA,SAAS,CAACK,IAAD,CAAT;AACD,aAFD,MAEO;AACL;AACAG,cAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAC,cAAAA,cAAc,CAAC,KAAD,CAAd;AACD;AACF,WATM,CAAP;AAUD;AACF,KAxBD;AAyBD,GA1BQ,EA0BN,EA1BM,CAAT;AA2BA,SAAO,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAP;AACD,CA7BD;;AA+BA,eAAetB,OAAf","sourcesContent":["import React, { useRef, useState, Fragment, useEffect } from \"react\";\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport { getDatabase, ref, set, onValue } from \"firebase/database\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { auth, logInWithEmailAndPassword } from \"../../firebase\";\n\nconst Gestion = (props) => {\n  useEffect(() => {\n    auth.onAuthStateChanged(function (user) {\n      setUserLogged(user);\n      const code = query.get(\"code\");\n      setCode(code);\n      // si code\n      if (code) {\n        // recuperer detail\n        const detail = location.state.detail;\n        setPropal(detail);\n      }\n      // sinon check en bd\n      else {\n        const prospectRef = ref(db, \"prospect/\" + user.uid);\n        onValue(prospectRef, (snapshot) => {\n          const data = snapshot.val();\n          if (data && !data.payed) {\n            setPropal(data);\n          } else {\n            // Aucune proposition en cours ou elle est payée\n            console.log(\"aucune offre\");\n            setProposition(false);\n          }\n        });\n      }\n    });\n  }, []);\n  return <Fragment>gestion</Fragment>;\n};\n\nexport default Gestion;\n"]},"metadata":{},"sourceType":"module"}