{"ast":null,"code":"import _slicedToArray from \"/Users/christophecaillet/Dev_local/React/grandcompte/leospa-main/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/christophecaillet/Dev_local/React/grandcompte/leospa-main/src/Layouts/Pages/Register.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { auth, registerWithEmailAndPassword } from \"../../firebase\";\nimport \"../../Register.css\";\nimport { getDatabase, ref, set, onValue } from \"firebase/database\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\n\nfunction useQuery() {\n  const _useLocation = useLocation(),\n        search = _useLocation.search;\n\n  return React.useMemo(() => new URLSearchParams(search), [search]);\n}\n\nfunction Register() {\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        email = _useState2[0],\n        setEmail = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        password = _useState4[0],\n        setPassword = _useState4[1];\n\n  const _useState5 = useState(\"\"),\n        _useState6 = _slicedToArray(_useState5, 2),\n        name = _useState6[0],\n        setName = _useState6[1];\n\n  const _useAuthState = useAuthState(auth),\n        _useAuthState2 = _slicedToArray(_useAuthState, 3),\n        user = _useAuthState2[0],\n        loading = _useAuthState2[1],\n        error = _useAuthState2[2];\n\n  const history = useHistory();\n\n  const _useState7 = useState(false),\n        _useState8 = _slicedToArray(_useState7, 2),\n        code = _useState8[0],\n        setCode = _useState8[1];\n\n  let query = useQuery();\n\n  const register = () => {\n    if (!name) alert(\"Merci d'entrer votre nom\");\n    registerWithEmailAndPassword(name, email, password);\n  };\n\n  useEffect(() => {\n    if (loading) return;\n    if (user) history.push(\"/dashboard\");\n  }, [user, loading]);\n  useEffect(() => {\n    const code = query.get(\"code\");\n    setCode(code);\n\n    if (loading) {\n      // maybe trigger a loading screen\n      return;\n    }\n\n    if (user) {\n      if (code) {\n        // enregistrer uid prospect\n        const db = getDatabase();\n        const prospectRef = ref(db, \"prospectEmail/\" + code);\n        onValue(prospectRef, snapshot => {\n          const data = snapshot.val();\n          set(ref(db, \"prospect/\" + user.uid), data); // history.push(\"/prospect?code=\" + code);\n\n          history.push({\n            pathname: \"/prospect\",\n            search: \"?code=\" + code,\n            state: {\n              detail: data\n            }\n          });\n        });\n      } else {\n        history.push(\"/marketplace\");\n      }\n    }\n  }, [user, loading]);\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"section\", {\n    className: \"banner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"spa-img\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: require(\"../../assets/images/ronde.png\"),\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-lg-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"banner-content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \"Cr\\xE9\\xE9 ton compte UNEXTRA\"), React.createElement(\"div\", {\n    className: \"register__container mt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    className: \"register__textBox\",\n    value: name,\n    onChange: e => setName(e.target.value),\n    placeholder: \"Votre nom\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"text\",\n    className: \"register__textBox\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    placeholder: \"Adresse E-mail\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"password\",\n    className: \"register__textBox\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    placeholder: \"Mot de passe\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    className: \"register__btn\",\n    onClick: register,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"S'enregistrer\"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, \"D\\xE9j\\xE0 un compte ? \", React.createElement(Link, {\n    to: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, \"Se connecter\"), \" \", \"maintenant.\"))))))));\n}\n\nexport default Register;","map":{"version":3,"sources":["/Users/christophecaillet/Dev_local/React/grandcompte/leospa-main/src/Layouts/Pages/Register.js"],"names":["React","useEffect","useState","useAuthState","auth","registerWithEmailAndPassword","getDatabase","ref","set","onValue","Link","useHistory","useLocation","useQuery","search","useMemo","URLSearchParams","Register","email","setEmail","password","setPassword","name","setName","user","loading","error","history","code","setCode","query","register","alert","push","get","db","prospectRef","snapshot","data","val","uid","pathname","state","detail","require","e","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { auth, registerWithEmailAndPassword } from \"../../firebase\";\nimport \"../../Register.css\";\nimport { getDatabase, ref, set, onValue } from \"firebase/database\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\n\nfunction useQuery() {\n  const { search } = useLocation();\n\n  return React.useMemo(() => new URLSearchParams(search), [search]);\n}\n\nfunction Register() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [user, loading, error] = useAuthState(auth);\n  const history = useHistory();\n  const [code, setCode] = useState(false);\n  let query = useQuery();\n  const register = () => {\n    if (!name) alert(\"Merci d'entrer votre nom\");\n    registerWithEmailAndPassword(name, email, password);\n  };\n\n  useEffect(() => {\n    if (loading) return;\n    if (user) history.push(\"/dashboard\");\n  }, [user, loading]);\n\n  useEffect(() => {\n    const code = query.get(\"code\");\n    setCode(code);\n    if (loading) {\n      // maybe trigger a loading screen\n      return;\n    }\n    if (user) {\n      if (code) {\n        // enregistrer uid prospect\n        const db = getDatabase();\n        const prospectRef = ref(db, \"prospectEmail/\" + code);\n        onValue(prospectRef, (snapshot) => {\n          const data = snapshot.val();\n          set(ref(db, \"prospect/\" + user.uid), data);\n          // history.push(\"/prospect?code=\" + code);\n          history.push({\n            pathname: \"/prospect\",\n            search: \"?code=\" + code,\n            state: { detail: data },\n          });\n        });\n      } else {\n        history.push(\"/marketplace\");\n      }\n    }\n  }, [user, loading]);\n\n  return (\n    <React.Fragment>\n      <section className=\"banner\">\n        <div className=\"spa-img\">\n          <img src={require(\"../../assets/images/ronde.png\")} alt=\"\" />\n        </div>\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-lg-6\">\n              <div className=\"banner-content\">\n                <h2>Créé ton compte UNEXTRA</h2>\n                <div className=\"register__container mt-3\">\n                  <input\n                    type=\"text\"\n                    className=\"register__textBox\"\n                    value={name}\n                    onChange={(e) => setName(e.target.value)}\n                    placeholder=\"Votre nom\"\n                  />\n                  <input\n                    type=\"text\"\n                    className=\"register__textBox\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                    placeholder=\"Adresse E-mail\"\n                  />\n                  <input\n                    type=\"password\"\n                    className=\"register__textBox\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    placeholder=\"Mot de passe\"\n                  />\n                  <button className=\"register__btn\" onClick={register}>\n                    S'enregistrer\n                  </button>\n                  <div>\n                    Déjà un compte ? <Link to=\"/\">Se connecter</Link>{\" \"}\n                    maintenant.\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n    </React.Fragment>\n  );\n}\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}